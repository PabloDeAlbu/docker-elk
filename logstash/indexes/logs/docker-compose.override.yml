version: '3.2'
services:
    logstash:
        container_name: ${PROJECT_NAME}_logstash_logs
        volumes:
          - type: bind
            source: ./logstash/indexes/logs/pipeline
            target: /usr/share/logstash/pipeline
    

    filebeat:
      container_name: ${PROJECT_NAME}_filebeat_logs
      build: 
        context: sources/filebeat/
      volumes:
        - type: bind
          source: ./sources/filebeat/logs/
          target: /var/log/
          read_only: true
        - type: bind
          source: ./sources/filebeat/filebeat.yml
          target: /usr/share/filebeat/filebeat.yml
          read_only: true
      depends_on: 
        - logstash
